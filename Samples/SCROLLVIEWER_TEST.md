# ScrollViewer 测试说明

## 测试目的

测试 MarkdView 控件在 ScrollViewer 中的表现，特别是在列表场景下的滚动行为和性能。

## 如何运行测试

1. 运行 Samples 项目
2. 在主窗口点击 **"ScrollViewer 测试"** 按钮
3. 将打开一个新的测试窗口

## 测试场景

### 场景 1: 单个 MarkdownViewer
- **测试点**: ScrollViewer 包裹单个 MarkdownViewer
- **预期行为**:
  - 外层 ScrollViewer 应该能够正常滚动
  - Markdown 内容完整显示
  - 滚动流畅无卡顿

### 场景 2: 列表模式
- **测试点**: ScrollViewer 中包含多个 MarkdownViewer 卡片
- **测试内容**:
  - 5 个不同的 Markdown 卡片
  - 包含不同类型的内容（标题、列表、代码块、链接等）
  - 不同编程语言的代码示例（C#, JavaScript, Python）

- **预期行为**:
  - 外层 ScrollViewer 能够平滑滚动整个列表
  - 每个卡片中的 MarkdownViewer 内容正确渲染
  - 代码块内部的 ScrollViewer 不会与外层冲突
  - 主题切换在所有卡片中同步生效

## 测试要点

### 1. 滚动行为测试
- [ ] 使用鼠标滚轮滚动外层 ScrollViewer
- [ ] 检查滚动是否流畅
- [ ] 检查是否有滚动冲突（外层和内层）
- [ ] 测试代码块内的横向滚动（长代码行）

### 2. 性能测试
- [ ] 观察渲染速度
- [ ] 检查是否有明显的延迟或卡顿
- [ ] 切换主题时的响应速度
- [ ] 滚动时的帧率表现

### 3. 主题切换测试
- [ ] 点击 "浅色" 按钮切换到浅色主题
- [ ] 点击 "深色" 按钮切换到深色主题
- [ ] 确认所有卡片中的 MarkdownViewer 主题同步更新
- [ ] 确认代码块主题也正确更新

### 4. 布局测试
- [ ] 卡片布局是否整齐
- [ ] MarkdownViewer 的宽度是否合适
- [ ] 代码块是否正确显示
- [ ] 边距和间距是否合理

## 已知问题和观察点

### MarkdownViewer 内部的 FlowDocumentScrollViewer
MarkdView 控件内部使用 `FlowDocumentScrollViewer` 来显示 Markdown 内容。测试时需要注意：

1. **滚轮事件冒泡**:
   - MarkdownViewer 已实现滚轮事件冒泡机制
   - 当内部 ScrollViewer 禁用时，滚轮事件会传递给外层

2. **代码块滚动**:
   - 代码块有自己的 ScrollViewer（用于长代码的横向滚动）
   - 需要测试代码块内滚动是否正常工作

3. **性能优化**:
   - 测试多个 MarkdownViewer 同时渲染时的性能
   - 观察初始加载时间和内存占用

## 测试结果记录

测试日期：_____________

### 场景 1 测试结果
- 滚动流畅度: ⭐⭐⭐⭐⭐
- 渲染性能: ⭐⭐⭐⭐⭐
- 主题切换: ⭐⭐⭐⭐⭐
- 问题记录:

### 场景 2 测试结果
- 滚动流畅度: ⭐⭐⭐⭐⭐
- 渲染性能: ⭐⭐⭐⭐⭐
- 主题切换: ⭐⭐⭐⭐⭐
- 列表性能: ⭐⭐⭐⭐⭐
- 问题记录:

## 修复和改进建议

如果发现问题，请在此记录：

1. 问题描述：
2. 复现步骤：
3. 预期行为：
4. 实际行为：
5. 建议修复方案：
